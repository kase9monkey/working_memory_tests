nTrials=10,minSetSize=3,stimuli_duration=1e3,recall_duration=null,file_name=null,local=!0,possibleNumbers=["1","2","3","4","5","6","7","8","9","0"];var e=jsPsych.randomization.sampleWithoutReplacement(possibleNumbers,minSetSize),t=-1,i=0,s=0,n=0,r={type:"survey-text",questions:[{prompt:"Enter participant number, name, or ID"}],on_finish:function(){partN=jsPsych.data.get().last(1).values()[0].partNum,partN=partN.replace(/['"]+/g,"")}},a={type:"instructions",pages:function(){return pageOne="<div style='font-size:20px;'><b>INSTRUCTIONS</b><br><br>This is the digit span task.<br><br>In this task, you will have to remember a sequence of numbers presented on the screen one after the other.<br>At the end of each trial, enter all the numbers into the onscreen number-pad in their correct order.<br><br><u>Example:</u> if the sequence is '7 4 5 1', enter '7 4 5 1' in this exact order.<br><br>You will now be given practice trials to help you understand the task.<br>Press 'Next' to start the practice trials.<br><br></div>",[pageOne]},allow_backward:!1,button_label_next:"Next",show_clickable_nav:!0},o={type:"instructions",pages:function(){return pageOne="<div style='font-size:20px;'>You have completed the practice trials. <br><br> If you have further questions about the task, ask the researcher now.<br> If you are clear about the task, click 'Next' to proceed to the main trials.<br><br></div>",[pageOne]},allow_backward:!1,button_label_next:"Next",show_clickable_nav:!0,on_finish:function(){minSetSize=3,e=jsPsych.randomization.sampleWithoutReplacement(possibleNumbers,minSetSize)}},l={type:"html-keyboard-response",stimulus:function(){return'<div style="font-size:70px;">'+e[t+=1]+"</div>"},choices:jsPsych.NO_KEYS,trial_duration:1e3,on_finish:function(){t+1>=e.length&&jsPsych.endCurrentTimeline()}},c={type:"digit-span-recall",correct_order:function(){return e},trial_duration:null,on_finish:function(){if(acc=jsPsych.data.get().last(1).values()[0].accuracy,1==acc?(s<minSetSize&&(s=minSetSize),minSetSize+=1,i=0):i<1?i+=1:(n<minSetSize&&(n=minSetSize),minSetSize=Math.max(3,minSetSize-1)),minSetSize<=8)e=jsPsych.randomization.sampleWithoutReplacement(possibleNumbers,minSetSize);else{e=jsPsych.randomization.sampleWithoutReplacement(possibleNumbers,8);var r=minSetSize-8,a=possibleNumbers.indexOf(e[7]);possibleNumbers.splice(a,1);var o=jsPsych.randomization.sampleWithoutReplacement(possibleNumbers,r);e=e.concat(o),possibleNumbers=["1","2","3","4","5","6","7","8","9","0"]}t=-1}},u={type:"instructions",pages:function(){var e='<canvas id="confetti-canvas" style="position: absolute;top:0;left:0;width:100vw;height:100vh;z-index:-1000;"></canvas>';return 1==jsPsych.data.get().last(1).values()[0].accuracy?(setTimeout((()=>{new ConfettiGenerator({target:"confetti-canvas"}).render()}),100),e+='<div style="font-size:35px; color:rgb(0 220 0)"><b>Correct</div>'):e+='<div style="font-size:35px; color:rgb(240 0 0)"><b>Incorrect</div>',[e]},allow_backward:!1,button_label_next:"Next",show_clickable_nav:!0},m={type:"html-keyboard-response",stimulus:function(){return'<div style="font-size:20px;">You have completed the task.<br>Thank you for your participation in this task.<br><br>Maximum number of digits recalled correctly was '+s+".<br><br>Maximum number of digits reached before making two consecutive errors was "+n+".<br><br>Please tell the Research Assistant you have completed the task.</div>"},choices:jsPsych.NO_KEYS},p={timeline:[l],repetitions:17},b={timeline:[p,c,u],repetitions:10},h={timeline:[p,c,u],repetitions:3},d={type:"html-keyboard-response",stimulus:" ",trial_duration:100,on_finish:function(){firebase.initializeApp({apiKey:"AIzaSyD_OSt5nPO2J3_utPClw0mkTG33LXSQkfo",authDomain:"working-memory-tests.firebaseapp.com",projectId:"working-memory-tests",storageBucket:"working-memory-tests.appspot.com",messagingSenderId:"180004817043",appId:"1:180004817043:web:f3de06e2dad40bfbe2a566",measurementId:"G-L5E2H06G3M"});const e=firebase.firestore();var t=jsPsych.data.get().filter({trial_type:"digit-span-recall"});const i={trialData:JSON.parse(t.json()),highest_span_score:s,consec_error_score:n,name:partN,time:Date.now()};e.collection("results").add(i)}};timeline=[r],timeline.push({type:"fullscreen",fullscreen_mode:!0}),timeline=timeline.concat([a,h,o,b]),timeline.push({type:"fullscreen",fullscreen_mode:!1}),timeline.push(d),timeline.push(m),jsPsych.init({timeline:timeline,on_finish:function(){jsPsych.data.displayData()}});
